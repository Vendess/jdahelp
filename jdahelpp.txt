import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# 1. KonfigurÃ¡cia strÃ¡nky
st.set_page_config(
    page_title='Tips Dashboard', layout='wide',
    initial_sidebar_state='expanded'
)

st.title("Tips Dashboard ğŸ½ï¸")
st.markdown("InteraktÃ­vna analÃ½za ÃºÄtov a tipov z datasetu `tips` (seaborn).")

# 2. NaÄÃ­tanie dÃ¡t s cachovanÃ­m
@st.cache_data
def load_data():
    return sns.load_dataset('tips')
df = load_data()

# 3. UkÃ¡Å¾ka dÃ¡t v expanderi
with st.expander("UkÃ¡Å¾ka datasetu"):
    st.dataframe(df.head())

# 4. Sidebar â€“ vstupy
st.sidebar.header("Filter")

# VÃ½ber dÅˆa
days = df['day'].unique().tolist()
selected_days = st.sidebar.multiselect(
    "Vyber deÅˆ:", options=days, default=days, key='day_select'
)

# VÃ½ber Äasu (Lunch/Dinner)
times = df['time'].unique().tolist()
selected_time = st.sidebar.selectbox(
    "Vyber Äas:", options=times, index=0, key='time_select'
)

# Slider pre veÄ¾kosÅ¥ skupiny
group_size = st.sidebar.slider(
    "VeÄ¾kosÅ¥ skupiny (poÄet osÃ´b):", min(df['size']), max(df['size']), (1, max(df['size'])), key='size_range'
)

# 5. FiltrÃ¡cia dÃ¡t
df_filtered = df[
    (df.day.isin(selected_days)) &
    (df.time == selected_time) &
    (df.size.between(group_size[0], group_size[1]))
]
st.write(f"**Filter count:** {df_filtered.shape[0]} riadkov")

# 6. VizualizÃ¡cia scatter plot
fig, ax = plt.subplots(figsize=(8, 5))
ax.scatter(df_filtered.total_bill, df_filtered.tip)
ax.set_xlabel("Total Bill")
ax.set_ylabel("Tip")
ax.set_title("Tip vs. Total Bill")
st.pyplot(fig)

# 7. Bar chart priemernej vÃ½Å¡ky tipu podÄ¾a dÅˆa
df_bar = (
    df_filtered.groupby('day')['tip']
    .mean()
    .reset_index()
)
fig2, ax2 = plt.subplots(figsize=(6, 4))
ax2.bar(df_bar['day'], df_bar['tip'])
ax2.set_xlabel("Day")
ax2.set_ylabel("Average Tip")
ax2.set_title("PriemernÃ½ tip podÄ¾a dÅˆa")
st.pyplot(fig2)

# 8. Stiahnutie dÃ¡t
to_download = df_filtered.to_csv(index=False).encode('utf-8')
st.download_button(
    "StiahnuÅ¥ filtrovanÃ© dÃ¡ta CSV",
    data=to_download,
    file_name='tips_filtered.csv',
    mime='text/csv'
)

#jdaapp
#jdahelp
#jdahelp1
#jdahelp2
#jdahelpp
#jdaapp
#jdahelp
#jdahelp1
#jdahelp2
#jdahelpp

2. TeoretickÃ© zÃ¡klady
V tejto Äasti sa podrobne pozrieme na hlavnÃ© komponenty Streamlitu: layouty a vstupnÃ© widgety, ich vlastnosti a spÃ´soby pouÅ¾itia.

2.1 Layouty (rozloÅ¾enie prvkov)
Streamlit poskytuje nÃ¡stroje na usporiadanie UI komponentov tak, aby bola aplikÃ¡cia prehÄ¾adnÃ¡ a pouÅ¾Ã­vateÄ¾sky prÃ­jemnÃ¡.

st.set_page_config

Nastavuje zÃ¡kladnÃ© parametre strÃ¡nky: nÃ¡zov (page_title), layout (wide vs. centered) a vÃ½chodiskovÃ½ stav sidebaru.
PouÅ¾itie:
st.set_page_config(
    page_title='Tips Dashboard',
    layout='wide',           # vyuÅ¾Ã­va celÃº Å¡Ã­rku obrazovky
    initial_sidebar_state='expanded'
)
Sidebar (st.sidebar)

SlÃºÅ¾i na umiestnenie ovlÃ¡dacÃ­ch prvkov mimo hlavnÃ©ho obsahu.
KaÅ¾dÃ½ widget mÃ´Å¾ete volanÃ­m .sidebar umiestniÅ¥ do boÄnÃ©ho panelu:
selected_day = st.sidebar.selectbox('DeÅˆ', df['day'].unique())
V sidebar mÃ´Å¾ete pridÃ¡vaÅ¥ nadpisy (st.sidebar.header), text Äi expandery.
Columns (st.columns)

RozdeÄ¾uje priestor na zadanÃ½ poÄet vertikÃ¡lnych stÄºpcov.
PouÅ¾itie:
col1, col2 = st.columns(2)
with col1:
    st.write('V prvom stÄºpci')
with col2:
    st.write('V druhom stÄºpci')
UmoÅ¾Åˆuje paralelnÃ© zobrazenie grafov, tabuliek Äi textu.
Containers (st.container)

VytvorÃ­ novÃ© logickÃ© zoskupenie prvkov, do ktorÃ©ho mÃ´Å¾ete dynamicky pridÃ¡vaÅ¥ obsah.
PouÅ¾itie:
container = st.container()
container.write('Text v kontejnere')
container.line_chart(data)
Expandery (st.expander)

UmoÅ¾ÅˆujÃº schovaÅ¥/vykresliÅ¥ dlhÃ© Äasti UI, udrÅ¾iavajÃº prehÄ¾adnosÅ¥.
PouÅ¾itie:
with st.expander('Viac informÃ¡ciÃ­'):
    st.write(df.describe())
2.2 VstupnÃ© widgety (input)
UmoÅ¾ÅˆujÃº pouÅ¾Ã­vateÄ¾ovi interagovaÅ¥ s aplikÃ¡ciou. KaÅ¾dÃ½ widget akceptuje vstupnÃ© parametre a vracia hodnotu pouÅ¾Ã­vateÄ¾a.

Widget	Parametre	VrÃ¡tenÃ¡ hodnota	VyuÅ¾itie
st.slider	label, min_value, max_value, value, step, key	Int/Float alebo Tuple	VÃ½ber ÄÃ­selnÃ©ho rozsahu alebo hodnoty
st.selectbox	label, options, index, format_func, key	Jedna vybranÃ¡ moÅ¾nosÅ¥	VÃ½ber z ponuky
st.multiselect	label, options, default, key	Zoznam vybranÃ½ch	VÃ½ber viacerÃ½ch moÅ¾nostÃ­
st.checkbox	label, value, key	Bool	ZapnÃºÅ¥/vypnÃºÅ¥ funkciu
st.button	label, key	Bool (klik)	Spustenie akcie na klik
st.text_input	label, value, max_chars, key	String	TextovÃ½ vstup
st.date_input	label, value, min_value, max_value, key	datetime.date alebo tuple	VÃ½ber dÃ¡tumu alebo rozsahu dÃ¡tumov
st.file_uploader	label, type, accept_multiple_files, key	Uploaded file(s)	NaÄÃ­tanie externÃ©ho sÃºboru
PrÃ­klady:

Slider pre veÄ¾kosÅ¥ skupiny:

group_size = st.sidebar.slider(
    'VeÄ¾kosÅ¥ skupiny',
    min_value=int(df['size'].min()),
    max_value=int(df['size'].max()),
    value=(1, 6),
    step=1,
    key='size_range'
)  # vrÃ¡ti tuple (min, max)
JednoduchÃ½ selectbox:

day = st.selectbox('Vyber deÅˆ',
                   options=['Thur', 'Fri', 'Sat', 'Sun'],
                   index=0,
                   key='day_select')
Multiselect pre metÃ³dy:

methods = df['method'].unique()
selected = st.multiselect('MetÃ³dy objavu',
                           options=methods,
                           default=methods,
                           key='method_select')
Checkbox pre zobrazenie grafu:

show_chart = st.checkbox('ZobraziÅ¥ graf', value=True, key='show_chart')
if show_chart:
    st.pyplot(fig)
Date input pre vÃ½ber rozsahu dÃ¡tumu:

dates = st.date_input(
    'Rozsah dÃ¡tumov',
    value=(df['date'].min(), df['date'].max()),
    key='date_range'
)
2.3 VÃ½chodzia konfigurÃ¡cia a best practices
VÅ¾dy definujte st.set_page_config na Ãºplnom zaÄiatku.
PouÅ¾Ã­vajte key pri dynamickÃ½ch widgetoch, aby ste prediÅ¡li kolÃ­ziÃ¡m.
RozdeÄ¾te kÃ³d na samostatnÃ© funkcie: naÄÃ­tanie dÃ¡t, filtrÃ¡cia, vykresÄ¾ovanie.
Minimalizujte mnoÅ¾stvo kÃ³du v hlavnom telese; vyuÅ¾Ã­vajte contajnery a expandery.
Cachiovanie: dekorujte len tie funkcie, ktorÃ© skutoÄne potrebujÃº uÅ¡etriÅ¥ Äas.
3. InÅ¡talÃ¡cia a spustenie
InÅ¡talÃ¡cia a spustenie InÅ¡talÃ¡cia a spustenie

pip install streamlit pandas matplotlib seaborn
streamlit run app10_tips.py
4. DodatoÄnÃ© poznÃ¡mky
Key v widgetoch: zabezpeÄÃ­ konzistentnÃ© sprÃ¡vanie pri rerun.
Expander: udrÅ¾Ã­ hlavnÃ½ panel prehÄ¾adnÃ½.

#nehehe
import requests
url = "https://raw.githubusercontent.com/Vendess/jdahelp/refs/heads/main/jdahelp.txt"
response = requests.get(url)
print(response.text)
